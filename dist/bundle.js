!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mobile=!1,window.addEventListener("resize",this.checkIfMobile.bind(this))}var t,n,o;return t=e,(n=[{key:"checkIfMobile",value:function(){return"none"===getComputedStyle(document.querySelector(".main-nav__hamburger")).getPropertyValue("display")?this.mobile=!1:this.mobile=!0,this.mobile}}])&&r(t.prototype,n),o&&r(t,o),e}();function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t,n,r,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.name=n,this.price=r,this.image=o,this.number=a,this.hover=!1,this.favourite=!1,this.addedToCart=!1,this.big=!1,this.selectorInPage,this.selectorInPageBtn,this.selectorInPageFav,this.temporaryImage="photo",this.generateHtml()}var t,n,r;return t=e,(n=[{key:"getId",value:function(){return this.id}},{key:"getName",value:function(){return this.name}},{key:"getPrice",value:function(){return this.price}},{key:"getImage",value:function(){return this.image}},{key:"getTemporaryImage",value:function(){return this.temporaryImage}},{key:"getHover",value:function(){return this.hover}},{key:"getFavourite",value:function(){return this.favourite}},{key:"getAddedToCart",value:function(){return this.addedToCart}},{key:"getSelectorInPage",value:function(){return this.selectorInPage}},{key:"getSelectorInPageBtn",value:function(){return this.selectorInPageBtn}},{key:"getSelectorInPageBtnText",value:function(){return this.selectorInPageBtnText}},{key:"getSelectorInPageBtnIcon",value:function(){return this.selectorInPageBtnIcon}},{key:"getSelectorInPageFav",value:function(){return this.selectorInPageFav}},{key:"getSelectorImgHover",value:function(){return this.selectorImgHover}},{key:"setHover",value:function(e){this.hover=e}},{key:"setAddedToFavourites",value:function(e){this.favourite=e}},{key:"setAddedToCart",value:function(e){this.addedToCart=e}},{key:"setSelectors",value:function(){this.selectorInPage=document.querySelector(".main__product-".concat(this.number)),this.selectorInPageBtn=document.querySelector(".main__product-".concat(this.number," .product__bag")),this.selectorInPageFav=document.querySelector(".main__product-".concat(this.number," .product__like")),this.selectorImgHover=document.querySelector(".main__product-".concat(this.number," .product__img-hover")),this.selectorInPageBtnText=document.querySelector(".main__product-".concat(this.number," .product__bag .product__bag-text")),this.selectorInPageBtnIcon=document.querySelector(".main__product-".concat(this.number," .product__bag .product__bag-icon"))}},{key:"replaceStringInHtml",value:function(e,t,n){var r=this,o=t;return e.map(function(e){var t="image"===e&&n?r.temporaryImage:Object.getOwnPropertyDescriptor(r,e).value;o=o.replace("{".concat(e,"}"),t)}),o}},{key:"generateHtml",value:function(){var e=document.querySelector(".main__grid"),t=document.querySelector("#clone").cloneNode(!0);t.removeAttribute("id"),t.removeAttribute("style");var n=t.outerHTML.toString(),r=!(this.id<8);n=this.replaceStringInHtml.call(this,["number","id","name","price","image","image","image"],n,r);var o=document.createElement("article");return e.appendChild(o),o.outerHTML=n,3===this.number&&this.addClassBig(),this.setSelectors(),n}},{key:"addClassBig",value:function(){a(document.querySelector(".main__product-3").querySelectorAll(".product__img")).forEach(function(e){return e.classList.add("product__img--big")}),this.big=!0}}])&&i(t.prototype,n),r&&i(t,r),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.products=[],this.productsInCartSelectors=[],this.moneyToPay=0,this.count=0,this.countInCart=document.querySelector(".cart__count"),this.cartSelector=document.querySelector(".cart"),this.dropdownSelector=document.querySelector(".cart__dropdown"),this.contentSelector=document.querySelector(".cart__dropdown-text"),this.cartContainerSelector=document.querySelector(".cart__container"),this.cartBtnSelector=document.querySelector(".cart__btn"),this.buttonCloseSelector=document.querySelector(".popup__close"),this.cartNotEmptySelector=document.querySelector(".cart__products"),this.cartEmptySelector=document.querySelector(".cart__empty"),this.removeBtn,this.toPaySelector,this.removeBtn=null,this.lastRemoved=null,this.handleRemoveFromCart(),this.windowSize=new o}var t,n,r;return t=e,(n=[{key:"setCollection",value:function(e){this.collection=e}},{key:"setSelectorProductInCart",value:function(e,t){var n={id:e.getId(),selectorInCart:t};this.productsInCartSelectors.push(n)}},{key:"handleToggleContent",value:function(){this.cartSelector.addEventListener("mouseenter",this.showContent.bind(this)),this.cartSelector.addEventListener("mouseleave",this.hideContent.bind(this)),this.cartSelector.addEventListener("click",this.showContent.bind(this)),this.cartSelector.addEventListener("click",this.hideContent.bind(this))}},{key:"handleRemoveFromCart",value:function(){this.cartContainerSelector.addEventListener("click",this.removeFromCart.bind(this))}},{key:"calculateThePrice",value:function(){var e=this.products.reduce(function(e,t){return e+t.getPrice()},0);this.moneyToPay=e}},{key:"showMoneyToPay",value:function(){this.toPaySelector.innerHTML="".concat(this.moneyToPay,"$")}},{key:"showCountProducts",value:function(){this.count=this.products.length,this.countInCart.innerHTML=this.count}},{key:"showContent",value:function(e){this.windowSize.checkIfMobile()||"mouseenter"!==e.type?this.windowSize.checkIfMobile()&&"click"===e.type&&(this.dropdownSelector.classList.add("popup--active"),this.buttonCloseSelector.classList.add("active"),this.dropdownSelector.classList.remove("cart__dropdown--active")):(this.dropdownSelector.classList.add("cart__dropdown--active"),this.buttonCloseSelector.classList.remove("active"),this.dropdownSelector.classList.remove("popup--active"))}},{key:"hideContent",value:function(e){this.windowSize.checkIfMobile()||"mouseleave"!==e.type?this.windowSize.checkIfMobile()&&"click"===e.type&&e.target===this.buttonCloseSelector&&(this.dropdownSelector.classList.remove("popup--active"),this.buttonCloseSelector.classList.remove("active")):this.dropdownSelector.classList.remove("cart__dropdown--active")}},{key:"placeInCart",value:function(e){this.products.length||this.generateHtmlList();var t=this.generateHtmlItem(e);this.setSelectorProductInCart(e,t),this.products.push(e),this.calculateThePrice(),this.showCountProducts(),this.showMoneyToPay()}},{key:"removeFromCart",value:function(){if(event.target.classList.contains("cart__list-btn")){var e=event.target.closest(".cart__list-item"),t=this.productsInCartSelectors.find(function(t){return t.selectorInCart===e}),n=this.productsInCartSelectors.findIndex(function(e){return e.id===t.id}),r=this.products.findIndex(function(e){return e.getId()===t.id});t.selectorInCart.remove(),this.productsInCartSelectors.splice(n,1),this.lastRemoved=this.products[r],this.products.splice(r,1),this.showCountProducts(),this.calculateThePrice(),this.showMoneyToPay(),this.collection.removeAddedToCartInHtml(this.lastRemoved),this.products.length||(this.cartEmptySelector.classList.remove("hidden"),this.cartNotEmptySelector.innerHTML="")}}},{key:"generateHtmlList",value:function(){var e,t;this.cartEmptySelector.classList.add("hidden"),this.countInCart.classList.add("active"),t=document.createElement("ul"),this.cartNotEmptySelector.appendChild(t),t.classList.add("cart__list");var n=document.createElement("hr");this.cartNotEmptySelector.appendChild(n),n.classList.add("cart__line"),this.cartBtnSelector.textContent="Go to Cart";var r=document.createElement("p");this.cartNotEmptySelector.appendChild(r),r.classList.add("cart__pay"),this.toPaySelector=document.querySelector(".cart__pay");var o=document.createElement("button");(e=o.classList).add.apply(e,["btn","cart__btn"]),o.textContent="Go shopping",this.cartNotEmptySelector.appendChild(o),r.classList.add("cart__pay")}},{key:"generateHtmlItem",value:function(e){var t=document.querySelector(".cart__list"),n=document.createElement("li");t.appendChild(n),n.classList.add("cart__list-item"),n.setAttribute("data-id","".concat(e.getId()));var r=document.createElement("p");n.appendChild(r),r.classList.add("cart__list-btn"),r.innerHTML="x",this.removeBtn=document.querySelector(".cart__list-btn");var o=document.createElement("img");n.appendChild(o);var a=e.getId()<8?e.getImage():e.getTemporaryImage();o.src="./assets/".concat(a,".jpg"),o.classList.add("cart__list-img");var i=document.createElement("p");n.appendChild(i),i.innerHTML=e.getName();var c=document.createElement("p");return n.appendChild(c),c.innerHTML="".concat(e.getPrice(),"$"),document.querySelector('li[data-id="'.concat(e.getId(),'"]'))}}])&&s(t.prototype,n),r&&s(t,r),e}();function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.products=[],this.productsSelector=null,this.bagBtnsSelector=null,this.likesSelector=null,this.mainCart=t,this.favouritesProducts=[],this.windowSize=new o,this.saveToSessionStorage(),window.addEventListener("resize",this.showAddedToCart.bind(this)),window.addEventListener("resize",this.showAddedToFavourites.bind(this))}var t,n,r;return t=e,(n=[{key:"getProducts",value:function(){return this.products}},{key:"setProductsSelectors",value:function(){this.productsSelector=l(document.querySelectorAll(".product:not(#clone)")),this.likesSelector=l(document.querySelectorAll(".product__like")),this.bagBtnsSelector=l(document.querySelectorAll(".product__bag")),this.handleMouseEvent(),this.handleAddToFavourites(),this.handleAddToCart()}},{key:"setProducts",value:function(e){this.products=e}},{key:"handleMouseEvent",value:function(){var e=this;null!==this.productsSelector&&this.productsSelector.forEach(function(t){t.addEventListener("mouseover",e.mouseOver.bind(e)),t.addEventListener("mouseleave",e.mouseLeave.bind(e))})}},{key:"handleAddToFavourites",value:function(){var e=this;null!==this.likesSelector&&this.likesSelector.forEach(function(t){t.addEventListener("click",e.addToFavourites.bind(e))})}},{key:"handleAddToCart",value:function(){var e=this;null!==this.bagBtnsSelector&&this.bagBtnsSelector.forEach(function(t){t.addEventListener("click",function(t){return e.addToCart(t)})})}},{key:"findProductById",value:function(e){return this.products.find(function(t){return t.getId()===e})}},{key:"mouseOver",value:function(e){var t=parseFloat(e.currentTarget.dataset.id),n=this.findProductById(t);this.windowSize.checkIfMobile()||(n.getAddedToCart()||(n.getSelectorImgHover().classList.add("product__img-hover--active"),n.getSelectorInPageBtn().classList.add("active")),n.getFavourite()||n.getSelectorInPageFav().classList.add("active"),n.setHover(!0))}},{key:"mouseLeave",value:function(e){var t=parseFloat(e.target.dataset.id),n=this.findProductById(t);this.windowSize.checkIfMobile()||(n.getFavourite()||n.getSelectorInPageFav().classList.remove("active"),n.getSelectorImgHover().classList.remove("product__img-hover--active"),n.getAddedToCart()||n.getSelectorInPageBtn().classList.remove("active"),n.setHover(!1))}},{key:"addToFavourites",value:function(e){var t=parseFloat(e.target.closest(".product").dataset.id),n=this.findProductById(t),r=this.favouritesProducts.findIndex(function(e){return e.id===n.getId()});this.toggleFavouritesInHtml(n,r)}},{key:"toggleFavouritesInHtml",value:function(e,t){e.getFavourite()?(e.getSelectorInPageFav().innerHTML='<i class="far fa-heart"></i>',e.getSelectorInPageFav().classList.remove("product__like--active"),e.setAddedToFavourites(!1),this.favouritesProducts.splice(t,1),this.saveToSessionStorage()):e.getFavourite()||(e.getSelectorInPageFav().innerHTML='<i class="fas fa-heart"></i>',e.getSelectorInPageFav().classList.add("product__like--active"),e.getSelectorInPageFav().classList.add("active"),e.setAddedToFavourites(!0),this.favouritesProducts.push(e),this.saveToSessionStorage())}},{key:"checkFavouritesInHtml",value:function(e){e.getSelectorInPageFav().innerHTML='<i class="fas fa-heart"></i>',e.getSelectorInPageFav().classList.add("product__like--active"),e.getSelectorInPageFav().classList.add("active")}},{key:"addToCart",value:function(e){var t=parseFloat(e.currentTarget.closest(".product").dataset.id),n=this.findProductById(t);n.getAddedToCart()||(n.setAddedToCart(!0),n.getSelectorInPageBtn().classList.add("product__bag--active"),n.getSelectorInPageBtnText().innerHTML="Added to Cart",n.getSelectorInPageBtnIcon().classList.add("hide"),this.mainCart.placeInCart(n))}},{key:"removeAddedToCartInHtml",value:function(e){var t=e.id;this.products.forEach(function(e){if(e.getId()===t){e.setAddedToCart(!1);["active","product__bag--active"].forEach(function(t){e.getSelectorInPageBtn().classList.remove("".concat(t))}),e.getSelectorInPageBtnText().innerHTML="Add to Cart",e.getSelectorInPageBtnIcon().classList.remove("hide")}})}},{key:"showAddedToCart",value:function(){var e=this.mainCart.products;this.products.filter(function(t){return!!e.filter(function(e){return t.getId()===e.id}).length}).forEach(function(e){["active","product__bag--active"].forEach(function(t){return e.getSelectorInPageBtn().classList.add("".concat(t))}),e.setAddedToCart(!0)})}},{key:"showAddedToFavourites",value:function(){var e=this,t=sessionStorage.getItem("products");this.favouritesProducts=JSON.parse(t),this.products.filter(function(t){return!!e.favouritesProducts.filter(function(e){return t.getId()===e.id}).length}).forEach(function(t){e.checkFavouritesInHtml(t),t.setAddedToFavourites(!0)})}},{key:"saveToSessionStorage",value:function(){sessionStorage.setItem("products",JSON.stringify(this.favouritesProducts))}}])&&d(t.prototype,n),r&&d(t,r),e}();function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentPage=0,this.maxPages=0,this.paginationItem,this.paginationListSelector,this.pagination=document.querySelector(".pagination"),this.arrow}var t,n,r;return t=e,(n=[{key:"handleChangePage",value:function(e){var t=this;this.paginationItem.forEach(function(n){return n.addEventListener("click",function(n){return t.changePage(n,e)})})}},{key:"changePage",value:function(e,t){e.preventDefault(),this.clearProducts();var n=e.currentTarget.dataset.id;this.currentPage=n,m(t)}},{key:"getCurrentPage",value:function(){return this.currentPage}},{key:"getMaxPages",value:function(){return this.maxPages}},{key:"setCurrentPage",value:function(e){this.currentPage=e}},{key:"setMaxPages",value:function(e){this.maxPages=e}},{key:"createPagination",value:function(e){this.pagination.innerHTML="";var t=document.createElement("ul");t.classList.add("pagination__list"),this.pagination.appendChild(t),this.paginationListSelector=document.querySelector(".pagination__list");for(var n=1;n<=this.maxPages;n++){var r=document.createElement("li");this.paginationListSelector.appendChild(r),r.setAttribute("data-id","".concat(n)),r.classList.add("pagination__item"),this.paginationItem=document.querySelectorAll(".pagination__item");var o=document.querySelector(".pagination__item:nth-child(".concat(n,")")),a=document.createElement("a");a.textContent="0".concat(n),a.href="#",o.appendChild(a)}if(this.maxPages>1&&this.maxPages!==this.currentPage){var i=document.createElement("img");i.src="./assets/iconmonstr-arrow-right-thin.svg",this.pagination.appendChild(i),i.classList.add("pagination__arrow"),this.arrow=document.querySelector(".pagination__arrow")}document.querySelector(".pagination__item:nth-child(".concat(this.currentPage,")")).classList.add("pagination__item--active"),this.handleChangePage(e)}},{key:"clearProducts",value:function(){var e=document.querySelector(".main__grid");document.querySelectorAll(".product:not(#clone)").forEach(function(t){return e.removeChild(t)})}}])&&v(t.prototype,n),r&&v(t,r),e}(),m=function(e){var t=e.url,n=e.collection,r=e.mainCart,o=e.paginator,a=new FormData;a.append("page",o.getCurrentPage()),fetch(t,{method:"post",body:a}).then(function(e){return e.ok?e.json():Promise.reject(e)}).then(function(e){return o.setCurrentPage(e.page),o.setMaxPages(e.maxPages),e.products}).then(function(e){var t=0;return e.map(function(e){var n=e.id,r=e.name,o=e.price,a=e.image;return t<=7?t++:t=0,new c(n,r,o,a,t)})}).then(function(e){return n.setProducts(e),n.getProducts()}).then(function(e){return n.setProductsSelectors()}).then(function(t){return r.setCollection(n),n.showAddedToCart(),n.showAddedToFavourites(),o.createPagination(e),t}).then(function(e){return console.log(n)}).catch(function(e){return console.log(e)})},p=new u,f=new h(p),y=new g;m({url:"https://makuchdesign.pl/justyna/sky_planet/ajax.php",collection:f,mainCart:p,paginator:y});p.handleToggleContent()}]);
//# sourceMappingURL=bundle.js.map