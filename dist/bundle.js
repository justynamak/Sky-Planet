!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e,r){},function(t,e,r){"use strict";r.r(e);r(0);function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mobile=!1,window.addEventListener("resize",this.checkIfMobile.bind(this))}var e,r,o;return e=t,(r=[{key:"checkIfMobile",value:function(){return"none"===getComputedStyle(document.querySelector(".main-nav__hamburger")).getPropertyValue("display")?this.mobile=!1:this.mobile=!0,this.mobile}}])&&n(e.prototype,r),o&&n(e,o),t}();function i(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.products=[],this.productsSelector=null,this.bagBtnsSelector=null,this.likesSelector=null,this.windowSize=new o,this.handleAddToCart(),window.addEventListener("resize",this.showAddedElements.bind(this))}var e,r,n;return e=t,(r=[{key:"addProduct",value:function(t){this.products.push(t)}},{key:"getProductsSelectors",value:function(){this.productsSelector=i(document.querySelectorAll(".product:not(#clone)")),this.likesSelector=i(document.querySelectorAll(".product__like")),this.bagBtnsSelector=i(document.querySelectorAll(".product__bag"))}},{key:"getAddedToCart",value:function(){return this.products.filter(function(t){return t.addedToCart})}},{key:"getNotAddedToCart",value:function(){return this.products.filter(function(t){return!t.addedToCart})}},{key:"getAddedToFavourites",value:function(){return this.products.filter(function(t){return t.favourite})}},{key:"getProducts",value:function(){return this.products}},{key:"setProducts",value:function(t){return this.products=t,this.products}},{key:"setAddedToFavourites",value:function(t){this.products.forEach(function(e){e.id===t&&(e.favourite=!0)})}},{key:"setAddedToCart",value:function(t){this.products.forEach(function(e){e.id===t&&(e.addedToCart=!0)})}},{key:"showAddedElements",value:function(){var t=this.getAddedToCart(),e=this.getAddedToFavourites();t.forEach(function(t){return t.selectorInPageBtn.classList.add("active")}),e.forEach(function(t){return t.selectorInPageFav.classList.add("active")})}},{key:"removeAddedToCartInHtml",value:function(){var t=["active","product__bag--active"];this.getNotAddedToCart().forEach(function(e){var r;return(r=e.selectorInPageBtn.classList).remove.apply(r,t)})}},{key:"removeAddedToFavourites",value:function(t){this.products.forEach(function(e){e.id===t&&(e.favourite=!1)})}},{key:"removeAddedToCart",value:function(t){this.products.forEach(function(e){e.id===t&&(e.addedToCart=!1)})}},{key:"handleMouseEvent",value:function(){var t=this;null!==this.productsSelector&&this.productsSelector.forEach(function(e){e.addEventListener("mouseover",t.mouseOver.bind(t)),e.addEventListener("mouseleave",t.mouseLeave.bind(t))})}},{key:"handleAddToFavourites",value:function(){var t=this;null!==this.likesSelector&&this.likesSelector.forEach(function(e){e.addEventListener("click",t.addToFavourites.bind(t))})}},{key:"handleAddToCart",value:function(t){var e=this;null!==this.bagBtnsSelector&&this.bagBtnsSelector.forEach(function(r){r.addEventListener("click",function(r){return e.addToCart(r,t)})})}},{key:"findProductById",value:function(t){return this.products.find(function(e){return e.id===t})}},{key:"mouseOver",value:function(t){var e=parseFloat(t.currentTarget.dataset.id),r=this.findProductById(e);if(!this.windowSize.checkIfMobile()){var n=t.currentTarget.querySelector(".product__like"),o=t.currentTarget.querySelector(".product__bag");r.addedToCart||(t.currentTarget.querySelector(".product__img-hover").classList.add("product__img-hover--active"),o.classList.add("active")),r.favourite||n.classList.add("active"),this.products.forEach(function(t){return t.id===e&&(t.hover=!0),!0})}}},{key:"mouseLeave",value:function(t){var e=parseFloat(t.target.dataset.id),r=this.findProductById(e);if(!this.windowSize.checkIfMobile()){var n=t.currentTarget.querySelector(".product__like"),o=t.currentTarget.querySelector(".product__bag");r.favourite||n.classList.remove("active"),t.currentTarget.querySelector(".product__img-hover").classList.remove("product__img-hover--active"),r.addedToCart||o.classList.remove("active")}}},{key:"addToFavourites",value:function(t){var e=parseFloat(t.target.closest(".product").dataset.id),r=this.findProductById(e);r.favourite?(t.currentTarget.innerHTML='<i class="far fa-heart"></i>',t.currentTarget.classList.remove("product__like--active"),this.removeAddedToFavourites(e)):r.favourite||(t.currentTarget.innerHTML='<i class="fas fa-heart"></i>',t.currentTarget.classList.add("product__like--active"),this.setAddedToFavourites(e))}},{key:"addToCart",value:function(t,e){var r=parseFloat(t.currentTarget.closest(".product").dataset.id),n=this.findProductById(r);n.addedToCart||(this.setAddedToCart(r),t.currentTarget.classList.add("product__bag--active"),t.currentTarget.textContent="Added to Cart",e.placeInCart(n))}}])&&a(e.prototype,r),n&&a(e,n),t}();function s(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var d=function(){function t(e,r,n,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.name=r,this.price=n,this.image=o,this.number=i,this.hover=!1,this.favourite=!1,this.addedToCart=!1,this.big=!1,this.selectorInPage,this.selectorInPageBtn,this.selectorInPageFav,this.generateHtml()}var e,r,n;return e=t,(r=[{key:"replaceStringInHtml",value:function(t,e){var r=this,n=e;return t.map(function(t){var e=Object.getOwnPropertyDescriptor(r,t).value;n=n.replace("{".concat(t,"}"),e)}),n}},{key:"generateHtml",value:function(){var t=document.querySelector(".main__grid"),e=document.querySelector("#clone").cloneNode(!0);e.removeAttribute("id"),e.removeAttribute("style");var r=e.outerHTML.toString();r=this.replaceStringInHtml.call(this,["number","id","name","price","image","image","image"],r);var n=document.createElement("article");return t.appendChild(n),n.outerHTML=r,3===this.number&&this.addClassBig(),this.setSelectors(),r}},{key:"addClassBig",value:function(){s(document.querySelector(".main__product-3").querySelectorAll(".product__img")).forEach(function(t){return t.classList.add("product__img--big")}),this.big=!0}},{key:"setSelectors",value:function(){this.selectorInPage=document.querySelector(".main__product-".concat(this.number)),this.selectorInPageBtn=this.selectorInPage.querySelector(".product__bag"),this.selectorInPageFav=this.selectorInPage.querySelector(".product__like")}}])&&u(e.prototype,r),n&&u(e,n),t}();function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var h,v,f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.products=[],this.moneyToPay=0,this.count=0,this.countInCart=document.querySelector(".cart__count"),this.cartSelector=document.querySelector(".cart"),this.dropdownSelector=document.querySelector(".cart__dropdown"),this.contentSelector=document.querySelector(".cart__dropdown-text"),this.cartContainerSelector=document.querySelector(".cart__container"),this.cartBtnSelector=document.querySelector(".cart__btn"),this.buttonClose=document.querySelector(".popup__close"),this.cartNotEmptySelector=document.querySelector(".cart__products"),this.cartEmptySelector=document.querySelector(".cart__empty"),this.removeBtn=null,this.lastRemoved=null,this.windowSize=new o}var e,r,n;return e=t,(r=[{key:"handleToggleContent",value:function(){this.cartSelector.addEventListener("mouseenter",this.showContent.bind(this)),this.cartSelector.addEventListener("mouseleave",this.hideContent.bind(this)),this.cartSelector.addEventListener("click",this.showContent.bind(this)),this.cartSelector.addEventListener("click",this.hideContent.bind(this))}},{key:"handleRemoveFromCart",value:function(t){var e=this;this.cartContainerSelector.addEventListener("click",function(r){return e.removeFromCart(r,t)})}},{key:"calculateThePrice",value:function(){this.moneyToPay=this.products.reduce(function(t,e){return t+e.price},0)}},{key:"showMoneyToPay",value:function(){document.querySelector(".cart__pay").innerHTML="".concat(this.moneyToPay,"$")}},{key:"showCountProducts",value:function(){this.count=this.products.length,this.countInCart.innerHTML=this.count}},{key:"showContent",value:function(t){this.windowSize.checkIfMobile()||"mouseenter"!==t.type?this.windowSize.checkIfMobile()&&"click"===t.type&&(this.dropdownSelector.classList.add("popup--active"),this.buttonClose.classList.add("active"),this.dropdownSelector.classList.remove("cart__dropdown--active")):(this.dropdownSelector.classList.add("cart__dropdown--active"),this.buttonClose.classList.remove("active"),this.dropdownSelector.classList.remove("popup--active"))}},{key:"hideContent",value:function(t){this.windowSize.checkIfMobile()||"mouseleave"!==t.type?this.windowSize.checkIfMobile()&&"click"===t.type&&t.target===this.buttonClose&&(this.dropdownSelector.classList.remove("popup--active"),this.buttonClose.classList.remove("active")):this.dropdownSelector.classList.remove("cart__dropdown--active")}},{key:"placeInCart",value:function(t){this.products.length||this.generateHtmlList(),t.selectorProductInCart=this.generateHtmlItem(t),this.products.push(t),this.calculateThePrice(),this.showCountProducts(),this.showMoneyToPay()}},{key:"removeFromCart",value:function(t,e){if(t.target.classList.contains("cart__list-btn")){var r=t.target.closest(".cart__list-item"),n=this.products.find(function(t){return t.selectorProductInCart===r}),o=this.products.findIndex(function(t){return t.selectorProductInCart===r});n.selectorProductInCart.remove(),this.products.splice(o,1),this.lastRemoved=n,this.showCountProducts(),this.calculateThePrice(),this.showMoneyToPay(),this.products.length||(this.cartEmptySelector.classList.remove("hidden"),this.cartNotEmptySelector.innerHTML=""),e.removeAddedToCart(this.lastRemoved.id),e.removeAddedToCartInHtml()}}},{key:"generateHtmlList",value:function(){var t,e;this.cartEmptySelector.classList.add("hidden"),this.countInCart.classList.add("active"),e=document.createElement("ul"),this.cartNotEmptySelector.appendChild(e),e.classList.add("cart__list");var r=document.createElement("hr");this.cartNotEmptySelector.appendChild(r),r.classList.add("cart__line"),this.cartBtnSelector.textContent="Go to Cart";var n=document.createElement("p");this.cartNotEmptySelector.appendChild(n),n.classList.add("cart__pay");var o=document.createElement("button");(t=o.classList).add.apply(t,["btn","cart__btn"]),o.textContent="Go shopping",this.cartNotEmptySelector.appendChild(o),n.classList.add("cart__pay")}},{key:"generateHtmlItem",value:function(t){var e=document.querySelector(".cart__list"),r=document.createElement("li");e.appendChild(r),r.classList.add("cart__list-item"),r.setAttribute("data-id","".concat(t.id));var n=document.createElement("p");r.appendChild(n),n.classList.add("cart__list-btn"),n.innerHTML="x",this.removeBtn=document.querySelector(".cart__list-btn");var o=document.createElement("img");r.appendChild(o),o.src="./assets/".concat(t.image,".jpg"),o.classList.add("cart__list-img");var i=document.createElement("p");r.appendChild(i),i.innerHTML=t.name;var a=document.createElement("p");return r.appendChild(a),a.innerHTML="".concat(t.price,"$"),document.querySelector('li[data-id="'.concat(t.id,'"]'))}}])&&l(e.prototype,r),n&&l(e,n),t}(),p=new c,m=new f;h=p,v=m,fetch("https://makuchdesign.pl/justyna/sky_planet/ajax.php").then(function(t){return t.ok?t.json():Promise.reject(t)}).then(function(t){return t.products}).then(function(t){var e=0;return t.map(function(t){var r=t.id,n=t.name,o=t.price,i=t.image;return e<=7?e++:e=0,new d(r,n,o,i,e)})}).then(function(t){return h.setProducts(t)}).then(function(t){return h.getProductsSelectors()}).then(function(t){return h.handleMouseEvent(),h.handleAddToFavourites(),h.handleAddToCart(v),v.handleRemoveFromCart(h),t}).then(function(t){return console.log(h)}).catch(function(t){return console.log(t)});m.handleToggleContent()}]);