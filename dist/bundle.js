!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){},function(e,t,r){"use strict";r.r(t);r(0);function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mobile=!1,window.addEventListener("resize",this.checkIfMobile.bind(this))}var t,r,o;return t=e,(r=[{key:"checkIfMobile",value:function(){return"none"===getComputedStyle(document.querySelector(".main-nav__hamburger")).getPropertyValue("display")?this.mobile=!1:this.mobile=!0,this.mobile}}])&&n(t.prototype,r),o&&n(t,o),e}();function a(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function e(t,r,n,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.name=r,this.price=n,this.image=o,this.number=a,this.hover=!1,this.favourite=!1,this.addedToCart=!1,this.big=!1,this.selectorInPage,this.selectorInPageBtn,this.selectorInPageFav,this.temporaryImage="photo",this.generateHtml()}var t,r,n;return t=e,(r=[{key:"getId",value:function(){return this.id}},{key:"getName",value:function(){return this.name}},{key:"getPrice",value:function(){return this.price}},{key:"getImage",value:function(){return this.image}},{key:"getTemporaryImage",value:function(){return this.temporaryImage}},{key:"getHover",value:function(){return this.hover}},{key:"getFavourite",value:function(){return this.favourite}},{key:"getAddedToCart",value:function(){return this.addedToCart}},{key:"getSelectorInPage",value:function(){return this.selectorInPage}},{key:"getSelectorInPageBtn",value:function(){return this.selectorInPageBtn}},{key:"getSelectorInPageFav",value:function(){return this.selectorInPageFav}},{key:"getSelectorImgHover",value:function(){return this.selectorImgHover}},{key:"setHover",value:function(e){this.hover=e}},{key:"setAddedToFavourites",value:function(e){this.favourite=e}},{key:"setAddedToCart",value:function(e){this.addedToCart=e}},{key:"setSelectors",value:function(){this.selectorInPage=document.querySelector(".main__product-".concat(this.number)),this.selectorInPageBtn=document.querySelector(".main__product-".concat(this.number," .product__bag")),this.selectorInPageFav=document.querySelector(".main__product-".concat(this.number," .product__like")),this.selectorImgHover=document.querySelector(".main__product-".concat(this.number," .product__img-hover"))}},{key:"replaceStringInHtml",value:function(e,t,r){var n=this,o=t;return e.map(function(e){var t="image"===e&&r?n.temporaryImage:Object.getOwnPropertyDescriptor(n,e).value;o=o.replace("{".concat(e,"}"),t)}),o}},{key:"generateHtml",value:function(){var e=document.querySelector(".main__grid"),t=document.querySelector("#clone").cloneNode(!0);t.removeAttribute("id"),t.removeAttribute("style");var r=t.outerHTML.toString(),n=!(this.id<8);r=this.replaceStringInHtml.call(this,["number","id","name","price","image","image","image"],r,n);var o=document.createElement("article");return e.appendChild(o),o.outerHTML=r,3===this.number&&this.addClassBig(),this.setSelectors(),r}},{key:"addClassBig",value:function(){a(document.querySelector(".main__product-3").querySelectorAll(".product__img")).forEach(function(e){return e.classList.add("product__img--big")}),this.big=!0}},{key:"removeAddedToCartInHtml",value:function(){var e=this;["active","product__bag--active"].forEach(function(t){return e.getSelectorInPageBtn().classList.remove("".concat(t))})}}])&&i(t.prototype,r),n&&i(t,n),e}();function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.products=[],this.productsInCartSelectors=[],this.moneyToPay=0,this.count=0,this.countInCart=document.querySelector(".cart__count"),this.cartSelector=document.querySelector(".cart"),this.dropdownSelector=document.querySelector(".cart__dropdown"),this.contentSelector=document.querySelector(".cart__dropdown-text"),this.cartContainerSelector=document.querySelector(".cart__container"),this.cartBtnSelector=document.querySelector(".cart__btn"),this.buttonCloseSelector=document.querySelector(".popup__close"),this.cartNotEmptySelector=document.querySelector(".cart__products"),this.cartEmptySelector=document.querySelector(".cart__empty"),this.removeBtn,this.toPaySelector,this.removeBtn=null,this.lastRemoved=null,this.handleRemoveFromCart(),this.windowSize=new o}var t,r,n;return t=e,(r=[{key:"setSelectorProductInCart",value:function(e,t){var r={id:e.getId(),selectorInCart:t};this.productsInCartSelectors.push(r)}},{key:"handleToggleContent",value:function(){this.cartSelector.addEventListener("mouseenter",this.showContent.bind(this)),this.cartSelector.addEventListener("mouseleave",this.hideContent.bind(this)),this.cartSelector.addEventListener("click",this.showContent.bind(this)),this.cartSelector.addEventListener("click",this.hideContent.bind(this))}},{key:"handleRemoveFromCart",value:function(){this.cartContainerSelector.addEventListener("click",this.removeFromCart.bind(this))}},{key:"handleUnregisterRemoveFromCart",value:function(){console.log("usuwany")}},{key:"calculateThePrice",value:function(){var e=this.products.reduce(function(e,t){return e+t.getPrice()},0);this.moneyToPay=e}},{key:"showMoneyToPay",value:function(){console.log(this),this.toPaySelector.innerHTML="".concat(this.moneyToPay,"$")}},{key:"showCountProducts",value:function(){this.count=this.products.length,this.countInCart.innerHTML=this.count}},{key:"showContent",value:function(e){this.windowSize.checkIfMobile()||"mouseenter"!==e.type?this.windowSize.checkIfMobile()&&"click"===e.type&&(this.dropdownSelector.classList.add("popup--active"),this.buttonCloseSelector.classList.add("active"),this.dropdownSelector.classList.remove("cart__dropdown--active")):(this.dropdownSelector.classList.add("cart__dropdown--active"),this.buttonCloseSelector.classList.remove("active"),this.dropdownSelector.classList.remove("popup--active"))}},{key:"hideContent",value:function(e){this.windowSize.checkIfMobile()||"mouseleave"!==e.type?this.windowSize.checkIfMobile()&&"click"===e.type&&e.target===this.buttonCloseSelector&&(this.dropdownSelector.classList.remove("popup--active"),this.buttonCloseSelector.classList.remove("active")):this.dropdownSelector.classList.remove("cart__dropdown--active")}},{key:"placeInCart",value:function(e){this.products.length||this.generateHtmlList();var t=this.generateHtmlItem(e);this.setSelectorProductInCart(e,t),this.products.push(e),this.calculateThePrice(),this.showCountProducts(),this.showMoneyToPay()}},{key:"removeFromCart",value:function(){if(event.target.classList.contains("cart__list-btn")){var e=event.target.closest(".cart__list-item"),t=this.productsInCartSelectors.find(function(t){return t.selectorInCart===e}),r=this.productsInCartSelectors.findIndex(function(e){return e.id===t.id}),n=this.products.findIndex(function(e){return e.getId()===t.id});t.selectorInCart.remove(),this.productsInCartSelectors.splice(r,1),this.lastRemoved=this.products[n],this.products.splice(n,1),this.showCountProducts(),this.calculateThePrice(),this.showMoneyToPay(),this.lastRemoved.setAddedToCart(!1),this.lastRemoved.removeAddedToCartInHtml(),this.products.length||(this.cartEmptySelector.classList.remove("hidden"),this.cartNotEmptySelector.innerHTML="")}}},{key:"generateHtmlList",value:function(){var e,t;this.cartEmptySelector.classList.add("hidden"),this.countInCart.classList.add("active"),t=document.createElement("ul"),this.cartNotEmptySelector.appendChild(t),t.classList.add("cart__list");var r=document.createElement("hr");this.cartNotEmptySelector.appendChild(r),r.classList.add("cart__line"),this.cartBtnSelector.textContent="Go to Cart";var n=document.createElement("p");this.cartNotEmptySelector.appendChild(n),n.classList.add("cart__pay"),this.toPaySelector=document.querySelector(".cart__pay");var o=document.createElement("button");(e=o.classList).add.apply(e,["btn","cart__btn"]),o.textContent="Go shopping",this.cartNotEmptySelector.appendChild(o),n.classList.add("cart__pay")}},{key:"generateHtmlItem",value:function(e){var t=document.querySelector(".cart__list"),r=document.createElement("li");t.appendChild(r),r.classList.add("cart__list-item"),r.setAttribute("data-id","".concat(e.getId()));var n=document.createElement("p");r.appendChild(n),n.classList.add("cart__list-btn"),n.innerHTML="x",this.removeBtn=document.querySelector(".cart__list-btn");var o=document.createElement("img");r.appendChild(o);var a=e.getId()<8?e.getImage():e.getTemporaryImage();o.src="./assets/".concat(a,".jpg"),o.classList.add("cart__list-img");var i=document.createElement("p");r.appendChild(i),i.innerHTML=e.getName();var c=document.createElement("p");return r.appendChild(c),c.innerHTML="".concat(e.getPrice(),"$"),document.querySelector('li[data-id="'.concat(e.getId(),'"]'))}}])&&s(t.prototype,r),n&&s(t,n),e}();function l(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.products=[],this.productsSelector=null,this.bagBtnsSelector=null,this.likesSelector=null,this.mainCart=t,this.windowSize=new o,this.handleAddToCart(),window.addEventListener("resize",this.showAddedToCart.bind(this))}var t,r,n;return t=e,(r=[{key:"getProducts",value:function(){return this.products}},{key:"setProductsSelectors",value:function(){this.productsSelector=l(document.querySelectorAll(".product:not(#clone)")),this.likesSelector=l(document.querySelectorAll(".product__like")),this.bagBtnsSelector=l(document.querySelectorAll(".product__bag")),this.handleMouseEvent(),this.handleAddToFavourites(),this.handleAddToCart()}},{key:"setProducts",value:function(e){this.products=e}},{key:"handleMouseEvent",value:function(){var e=this;null!==this.productsSelector&&this.productsSelector.forEach(function(t){t.addEventListener("mouseover",e.mouseOver.bind(e)),t.addEventListener("mouseleave",e.mouseLeave.bind(e))})}},{key:"handleAddToFavourites",value:function(){var e=this;null!==this.likesSelector&&this.likesSelector.forEach(function(t){t.addEventListener("click",e.addToFavourites.bind(e))})}},{key:"handleAddToCart",value:function(){var e=this;null!==this.bagBtnsSelector&&this.bagBtnsSelector.forEach(function(t){t.addEventListener("click",function(t){return e.addToCart(t)})})}},{key:"findProductById",value:function(e){return this.products.find(function(t){return t.getId()===e})}},{key:"mouseOver",value:function(e){var t=parseFloat(e.currentTarget.dataset.id),r=this.findProductById(t);this.windowSize.checkIfMobile()||(r.getAddedToCart()||(r.getSelectorImgHover().classList.add("product__img-hover--active"),r.getSelectorInPageBtn().classList.add("active")),r.getFavourite()||r.getSelectorInPageFav().classList.add("active"),r.setHover(!0))}},{key:"mouseLeave",value:function(e){var t=parseFloat(e.target.dataset.id),r=this.findProductById(t);this.windowSize.checkIfMobile()||(r.getFavourite()||r.getSelectorInPageFav().classList.remove("active"),r.getSelectorImgHover().classList.remove("product__img-hover--active"),r.getAddedToCart()||r.getSelectorInPageBtn().classList.remove("active"),r.setHover(!1))}},{key:"addToFavourites",value:function(e){var t=parseFloat(e.target.closest(".product").dataset.id),r=this.findProductById(t);r.getFavourite()?(r.getSelectorInPageFav().innerHTML='<i class="far fa-heart"></i>',r.getSelectorInPageFav().classList.remove("product__like--active"),r.setAddedToCart(!1)):r.getFavourite()||(r.getSelectorInPageFav().innerHTML='<i class="fas fa-heart"></i>',r.getSelectorInPageFav().classList.add("product__like--active"),r.setAddedToFavourites(!0))}},{key:"addToCart",value:function(e){var t=parseFloat(e.currentTarget.closest(".product").dataset.id),r=this.findProductById(t);r.getAddedToCart()||(r.setAddedToCart(!0),r.getSelectorInPageBtn().classList.add("product__bag--active"),r.getSelectorInPageBtn().innerHTML="Added to Cart",console.log(this.mainCart),this.mainCart.placeInCart(r))}},{key:"showAddedToCart",value:function(){var e=this.mainCart.products;this.products.filter(function(t){return!!e.filter(function(e){return t.getId()===e.id}).length}).forEach(function(e){["active","product__bag--active"].forEach(function(t){return e.getSelectorInPageBtn().classList.add("".concat(t))}),e.setAddedToCart(!0)})}},{key:"showAddedToFavourites",value:function(){}}])&&d(t.prototype,r),n&&d(t,n),e}();function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentPage=0,this.maxPages=0,this.paginationItem,this.paginationListSelector,this.pagination=document.querySelector(".pagination"),this.arrow}var t,r,n;return t=e,(r=[{key:"handleChangePage",value:function(e){var t=this;this.paginationItem.forEach(function(r){return r.addEventListener("click",function(r){return t.changePage(r,e)})})}},{key:"changePage",value:function(e,t){e.preventDefault(),this.clearProducts();var r=e.currentTarget.dataset.id;this.currentPage=r,p(t)}},{key:"getCurrentPage",value:function(){return this.currentPage}},{key:"getMaxPages",value:function(){return this.maxPages}},{key:"setCurrentPage",value:function(e){this.currentPage=e}},{key:"setMaxPages",value:function(e){this.maxPages=e}},{key:"createPagination",value:function(e){this.pagination.innerHTML="";var t=document.createElement("ul");t.classList.add("pagination__list"),this.pagination.appendChild(t),this.paginationListSelector=document.querySelector(".pagination__list");for(var r=1;r<=this.maxPages;r++){var n=document.createElement("li");this.paginationListSelector.appendChild(n),n.setAttribute("data-id","".concat(r)),n.classList.add("pagination__item"),this.paginationItem=document.querySelectorAll(".pagination__item");var o=document.querySelector(".pagination__item:nth-child(".concat(r,")")),a=document.createElement("a");a.textContent="0".concat(r),a.href="#",o.appendChild(a)}if(this.maxPages>1&&this.maxPages!==this.currentPage){var i=document.createElement("img");i.src="./assets/iconmonstr-arrow-right-thin.svg",this.pagination.appendChild(i),i.classList.add("pagination__arrow"),this.arrow=document.querySelector(".pagination__arrow")}document.querySelector(".pagination__item:nth-child(".concat(this.currentPage,")")).classList.add("pagination__item--active"),this.handleChangePage(e)}},{key:"clearProducts",value:function(){var e=document.querySelector(".main__grid");document.querySelectorAll(".product:not(#clone)").forEach(function(t){return e.removeChild(t)})}}])&&v(t.prototype,r),n&&v(t,n),e}(),p=function(e){var t=e.url,r=e.collection,n=(e.mainCart,e.paginator),o=new FormData;o.append("page",n.getCurrentPage()),fetch(t,{method:"post",body:o}).then(function(e){return e.ok?e.json():Promise.reject(e)}).then(function(e){return n.setCurrentPage(e.page),n.setMaxPages(e.maxPages),e.products}).then(function(e){var t=0;return e.map(function(e){var r=e.id,n=e.name,o=e.price,a=e.image;return t<=7?t++:t=0,new c(r,n,o,a,t)})}).then(function(e){return r.setProducts(e),r.getProducts()}).then(function(e){return r.setProductsSelectors()}).then(function(t){return r.showAddedToCart(),n.createPagination(e),t}).catch(function(e){return console.log(e)})},g=new u,f=new h(g),y=new m;p({url:"https://makuchdesign.pl/justyna/sky_planet/ajax.php",collection:f,mainCart:g,paginator:y});g.handleToggleContent()}]);
//# sourceMappingURL=bundle.js.map